<div class="app-container">
  @if (isAuthenticated$ | async) {
    <!-- Navigation Header -->
    <nav class="navbar">
      <div class="navbar-brand">
        <span class="logo">ðŸŽ¾</span>
        <span class="brand-text">{{ title }}</span>
      </div>

      <!-- Desktop Navigation -->
      <div class="navbar-menu desktop-menu">
        @for (item of navItems; track item.route) {
          <a [routerLink]="item.route" 
             routerLinkActive="active"
             class="nav-link">
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label">{{ item.label }}</span>
          </a>
        }
      </div>

      <!-- User Menu -->
      <div class="navbar-end">
        <!-- Search Button -->
        <button class="btn-search" 
                (click)="openSearch()" 
                title="Search (Ctrl/Cmd + K)"
                aria-label="Open search">
          <svg class="search-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          <span class="search-label">Search</span>
        </button>
        
        <div class="user-menu">
          <span class="user-email">{{ (currentUser$ | async)?.email }}</span>
          <button class="btn-logout" (click)="logout()">
            <span class="logout-icon">ðŸšª</span>
            Logout
          </button>
        </div>

        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle" (click)="toggleMenu()">
          <span class="hamburger" [class.open]="isMenuOpen"></span>
        </button>
      </div>
    </nav>

    <!-- Mobile Navigation Menu -->
    @if (isMenuOpen) {
      <div class="mobile-menu" [class.open]="isMenuOpen">
        @for (item of navItems; track item.route) {
          <a [routerLink]="item.route" 
             routerLinkActive="active"
             class="mobile-nav-link"
             (click)="toggleMenu()">
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label">{{ item.label }}</span>
          </a>
        }
        <button class="mobile-logout" (click)="logout()">
          <span class="logout-icon">ðŸšª</span>
          Logout
        </button>
      </div>
    }

    <!-- Main Content Area -->
    <main class="main-content">
      <router-outlet></router-outlet>
    </main>
    
    <!-- Global Search Modal -->
    <app-global-search #globalSearch></app-global-search>
  } @else {
    <!-- Show router outlet without navigation for auth pages -->
    <router-outlet></router-outlet>
  }
</div>